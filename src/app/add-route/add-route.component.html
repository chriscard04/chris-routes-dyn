<mat-toolbar class="p-4 mt-3">
  <span class="text-primary">{{isEditRoute ? 'Ver y Editar' : 'AÃ±adir'}} Ruta</span>
</mat-toolbar>
<div class="px-4 mt-3">
  <form [formGroup]="routeForm" class="container">
    <div class="col">
      @if (!isEditRoute) {
        <div class="row">
          <div class="col-8">
            <mat-form-field appearance="outline" color="primary">
              <mat-label>Ruta a buscar</mat-label>
              <input #busquedaRuta matInput type="text" tabindex="1">
            </mat-form-field>
          </div>
          <div class="col-auto">
            <button mat-raised-button (click)="findRutaExt(busquedaRuta.value)" [disabled]="busquedaRuta.value === ''">Cargar Ruta</button>
          </div>
        </div>
        }

      <div class="">
      <mat-form-field appearance="fill" color="accent" class="disable-focus">
        <mat-label>ID Ruta</mat-label>
        <input matInput type="text" formControlName="id_ruta" placeholder="ID Ruta" readonly="true" tabindex="-1">
      </mat-form-field>
      </div>
        <div class="">
        <mat-form-field appearance="outline" tabindex="1">
          <mat-label>Select a Driver</mat-label>
          <mat-select matInput formControlName="conductor" name="driver">
            @for (driver of conductores; track driver.ID) {
              <mat-option [value]="driver">{{driver.NAME}}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        </div>

        <div class="">
          <mat-form-field appearance="outline" tabindex="2">
            <mat-label>Fecha Entrega</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="fecha_entrega">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="">
        <mat-form-field appearance="outline" tabindex="3">
          <mat-label>Notas</mat-label>
          <textarea matInput formControlName="notas"></textarea>
        </mat-form-field>
        </div>

    </div>
  </form>


    <table class="shadow" mat-table [dataSource]="dataSource">

      <ng-container matColumnDef="secuencia">
        <th class="" mat-header-cell *matHeaderCellDef>#</th>
        <td mat-cell *matCellDef="let orden"> {{orden.secuencia}} </td>
      </ng-container>

      <ng-container matColumnDef="id_orden">
        <th class="" mat-header-cell *matHeaderCellDef> Orden </th>
        <td mat-cell *matCellDef="let orden"> {{ orden.id_orden }}  </td>
      </ng-container>

      <ng-container matColumnDef="valor">
        <th class="" mat-header-cell *matHeaderCellDef> Valor </th>
        <td mat-cell *matCellDef="let orden"> {{orden.valor}} </td>
      </ng-container>

      <ng-container matColumnDef="prioritario">
        <th class="" mat-header-cell *matHeaderCellDef> Prioritario </th>
        <td mat-cell *matCellDef="let orden">
          <mat-checkbox [checked]="orden.prioritario"></mat-checkbox>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    </table>
    <mat-paginator class="shadow" #paginator [pageSizeOptions]="[3, 5, 10, 25, 100]" aria-label="Select page"> </mat-paginator>


</div>

